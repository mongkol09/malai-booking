import { MailerSend, EmailParams, Sender, Recipient } from "mailersend";

const mailerSend = new MailerSend({
    apiKey: process.env.API_KEY,
});

const sentFrom = new Sender("info@domain.com", "Your name");

const recipients = [
    new Recipient("recipient@email.com", "Your Client")
];

const personalization = [
  {
    email: "recipient@email.com",
    data: {
      tax: '',
      name: '',
      Check: {
        out: {
          date: {
            time: ''
          }
        }
      },
      check: {
        in: {
          date: {
            time: ''
          }
        }
      },
      price: '',
      total: '',
      nights: '',
      room_type: '',
      booking_id: '',
      hotel_name: '',
      guest_count: '',
      hotel_email: '',
      hotel_phone: '',
      receipt_url: '',
      account_name: '',
      Customer_name: '',
      check_in_date: '',
      check_in_time: '',
      customer_city: '',
      hotel_address: '',
      hotel_website: '',
      check_out_date: '',
      check_out_time: '',
      customer_email: '',
      customer_country: '',
      manage_booking_url: '',
      customer_postal_code: '',
      hotel_signature_name: ''
    },
  }
];

const emailParams = new EmailParams()
    .setFrom(sentFrom)
    .setTo(recipients)
    .setReplyTo(sentFrom)
    .setSubject("This is a Subject")
    .setTemplateId('jpzkmgqqwyvg059v')
    .setPersonalization(personalization);

await mailerSend.email.send(emailParams);