<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å‡∏à‡∏£‡∏¥‡∏á - Real Booking System</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <style>
        .booking-card {
            border: 1px solid #dee2e6;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .step-indicator {
            background: linear-gradient(45deg, #007bff, #0056b3);
            color: white;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 15px;
        }
        .result-card {
            border-left: 4px solid #28a745;
            background: #f8f9fa;
        }
        .error-card {
            border-left: 4px solid #dc3545;
            background: #fff5f5;
        }
        .loading {
            display: none;
        }
        .loading.show {
            display: block;
        }
        .api-status {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
        }
    </style>
</head>
<body class="bg-light">
    <!-- API Status Indicator -->
    <div id="apiStatus" class="api-status">
        <div class="alert alert-info" role="alert">
            <i class="bi bi-wifi me-2"></i>
            <span id="statusText">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö API...</span>
        </div>
    </div>

    <div class="container py-4">
        <!-- Header -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="booking-card bg-success text-white p-4">
                    <h1 class="mb-0">
                        <i class="bi bi-calendar-check me-2"></i>
                        ‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å‡∏à‡∏£‡∏¥‡∏á - Real Booking System
                    </h1>
                    <p class="mb-0 mt-2">‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö API ‡∏à‡∏£‡∏¥‡∏á ‡πÅ‡∏•‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</p>
                    <small class="d-block mt-2">
                        <i class="bi bi-info-circle me-1"></i>
                        ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏∞‡∏õ‡∏£‡∏≤‡∏Å‡∏è‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤ Admin: http://localhost:3000/room-booking-list
                    </small>
                </div>
            </div>
        </div>

        <!-- Booking Form -->
        <div class="row">
            <div class="col-lg-8">
                <div class="booking-card p-4 mb-4">
                    <div class="step-indicator">1</div>
                    <h3 class="text-center mb-4">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å</h3>
                    
                    <form id="realBookingForm">
                        <!-- Guest Information -->
                        <div class="card mb-4">
                            <div class="card-header">
                                <h5><i class="bi bi-person me-2"></i>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å</h5>
                            </div>
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏• *</label>
                                        <input type="text" class="form-control" id="guestName" value="‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏î‡∏™‡∏≠‡∏ö ‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏à‡∏£‡∏¥‡∏á" required>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">‡∏≠‡∏µ‡πÄ‡∏°‡∏• *</label>
                                        <input type="email" class="form-control" id="guestEmail" value="real.booking@hotel.test" required>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå *</label>
                                        <input type="tel" class="form-control" id="guestPhone" value="081-234-5678" required>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">‡∏™‡∏±‡∏ç‡∏ä‡∏≤‡∏ï‡∏¥</label>
                                        <select class="form-select" id="nationality">
                                            <option value="Thai" selected>‡πÑ‡∏ó‡∏¢</option>
                                            <option value="American">‡∏≠‡πÄ‡∏°‡∏£‡∏¥‡∏Å‡∏±‡∏ô</option>
                                            <option value="Japanese">‡∏ç‡∏µ‡πà‡∏õ‡∏∏‡πà‡∏ô</option>
                                            <option value="Chinese">‡∏à‡∏µ‡∏ô</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Room Information -->
                        <div class="card mb-4">
                            <div class="card-header">
                                <h5><i class="bi bi-house me-2"></i>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å</h5>
                            </div>
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏´‡πâ‡∏≠‡∏á *</label>
                                        <select class="form-select" id="roomType" required>
                                            <option value="Onsen" selected>Onsen Room</option>
                                            <option value="Deluxe">Deluxe Room</option>
                                            <option value="Standard">Standard Room</option>
                                            <option value="Suite">Suite Room</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å</label>
                                        <select class="form-select" id="guestCount">
                                            <option value="1">1 ‡∏ó‡πà‡∏≤‡∏ô</option>
                                            <option value="2" selected>2 ‡∏ó‡πà‡∏≤‡∏ô</option>
                                            <option value="3">3 ‡∏ó‡πà‡∏≤‡∏ô</option>
                                            <option value="4">4 ‡∏ó‡πà‡∏≤‡∏ô</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">‡∏ß‡∏±‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å *</label>
                                        <input type="date" class="form-control" id="checkinDate" value="2025-08-19" required>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">‡∏ß‡∏±‡∏ô‡∏≠‡∏≠‡∏Å *</label>
                                        <input type="date" class="form-control" id="checkoutDate" value="2025-08-20" required>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Payment Information -->
                        <div class="card mb-4">
                            <div class="card-header">
                                <h5><i class="bi bi-credit-card me-2"></i>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</h5>
                            </div>
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞</label>
                                        <select class="form-select" id="paymentMethod">
                                            <option value="credit_card" selected>‡∏ö‡∏±‡∏ï‡∏£‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï</option>
                                            <option value="bank_transfer">‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô</option>
                                            <option value="cash">‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞</label>
                                        <select class="form-select" id="paymentStatus">
                                            <option value="paid" selected>‡∏ä‡∏≥‡∏£‡∏∞‡πÅ‡∏•‡πâ‡∏ß</option>
                                            <option value="pending">‡∏£‡∏≠‡∏ä‡∏≥‡∏£‡∏∞</option>
                                            <option value="partial">‡∏ä‡∏≥‡∏£‡∏∞‡∏ö‡∏≤‡∏á‡∏™‡πà‡∏ß‡∏ô</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Special Requests -->
                        <div class="card mb-4">
                            <div class="card-header">
                                <h5><i class="bi bi-chat-dots me-2"></i>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏û‡∏¥‡πÄ‡∏®‡∏©</h5>
                            </div>
                            <div class="card-body">
                                <textarea class="form-control" id="specialRequests" rows="3" placeholder="‡∏£‡∏∞‡∏ö‡∏∏‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏û‡∏¥‡πÄ‡∏®‡∏© (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)">‡∏Ç‡∏≠‡∏´‡πâ‡∏≠‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏á‡∏µ‡∏¢‡∏ö ‡πÅ‡∏•‡∏∞‡∏Ç‡∏≠‡∏ú‡πâ‡∏≤‡πÄ‡∏ä‡πá‡∏î‡∏ï‡∏±‡∏ß‡πÄ‡∏û‡∏¥‡πà‡∏° - ‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏à‡∏£‡∏¥‡∏á‡∏ú‡πà‡∏≤‡∏ô API</textarea>
                            </div>
                        </div>

                        <!-- Submit Button -->
                        <div class="text-center">
                            <button type="submit" class="btn btn-success btn-lg px-5" id="submitBtn">
                                <i class="bi bi-calendar-check me-2"></i>
                                ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏à‡∏£‡∏¥‡∏á
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Summary & Results -->
            <div class="col-lg-4">
                <div class="booking-card p-4 mb-4">
                    <div class="step-indicator">2</div>
                    <h4 class="text-center mb-3">‡∏™‡∏£‡∏∏‡∏õ‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á</h4>
                    <div id="bookingSummary">
                        <div class="alert alert-info">
                            <i class="bi bi-info-circle me-2"></i>
                            ‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡∏∞‡∏Å‡∏î‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á‡∏£‡∏∞‡∏ö‡∏ö
                        </div>
                    </div>
                </div>

                <!-- Loading -->
                <div id="loadingCard" class="booking-card p-4 mb-4 loading">
                    <div class="text-center">
                        <div class="spinner-border text-success mb-3" role="status">
                            <span class="visually-hidden">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á...</span>
                        </div>
                        <h5>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...</h5>
                        <p class="text-muted">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà</p>
                    </div>
                </div>

                <!-- Results -->
                <div id="resultsCard" class="booking-card p-4 loading">
                    <div class="step-indicator">3</div>
                    <h4 class="text-center mb-3">‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á</h4>
                    <div id="bookingResults"></div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        const API_BASE_URL = 'http://localhost:3001/api/v1';
        let apiHealthy = false;

        // Check API health
        async function checkApiHealth() {
            try {
                const response = await fetch(`${API_BASE_URL.replace('/api/v1', '')}/health`);
                if (response.ok) {
                    apiHealthy = true;
                    document.getElementById('statusText').innerHTML = '<i class="bi bi-check-circle me-2"></i>API ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÅ‡∏•‡πâ‡∏ß';
                    document.getElementById('apiStatus').className = 'api-status';
                    document.getElementById('apiStatus').firstElementChild.className = 'alert alert-success';
                } else {
                    throw new Error('API not responding');
                }
            } catch (error) {
                apiHealthy = false;
                document.getElementById('statusText').innerHTML = '<i class="bi bi-x-circle me-2"></i>API ‡πÑ‡∏°‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°';
                document.getElementById('apiStatus').firstElementChild.className = 'alert alert-danger';
            }
        }

        // Calculate pricing
        function calculatePricing(roomType, nights) {
            const rates = {
                'Onsen': 3500,
                'Deluxe': 2500,
                'Standard': 1500,
                'Suite': 5000
            };
            
            const roomRate = rates[roomType] || 2000;
            const subtotal = roomRate * nights;
            const taxes = Math.round(subtotal * 0.1); // 10% tax
            const fees = 100; // Service fee
            const totalAmount = subtotal + taxes + fees;
            
            return {
                roomRate,
                subtotal,
                taxes,
                fees,
                totalAmount,
                currency: 'THB'
            };
        }

        // Update summary when form changes
        function updateSummary() {
            const guestName = document.getElementById('guestName').value;
            const roomType = document.getElementById('roomType').value;
            const checkinDate = document.getElementById('checkinDate').value;
            const checkoutDate = document.getElementById('checkoutDate').value;
            const guestCount = document.getElementById('guestCount').value;

            const checkin = new Date(checkinDate);
            const checkout = new Date(checkoutDate);
            const nights = Math.ceil((checkout - checkin) / (1000 * 60 * 60 * 24));
            
            const pricing = calculatePricing(roomType, nights);

            const summary = `
                <div class="card">
                    <div class="card-body">
                        <h6><i class="bi bi-person-fill me-2"></i>‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å</h6>
                        <p class="mb-2">${guestName || '‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏Å‡∏£‡∏≠‡∏Å'}</p>
                        
                        <h6><i class="bi bi-house-fill me-2"></i>‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å</h6>
                        <p class="mb-2">${roomType} - ${guestCount} ‡∏ó‡πà‡∏≤‡∏ô</p>
                        
                        <h6><i class="bi bi-calendar-fill me-2"></i>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</h6>
                        <p class="mb-2">‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å: ${checkin.toLocaleDateString('th-TH')}</p>
                        <p class="mb-2">‡∏≠‡∏≠‡∏Å: ${checkout.toLocaleDateString('th-TH')}</p>
                        <p class="mb-3"><strong>${nights} ‡∏Ñ‡∏∑‡∏ô</strong></p>
                        
                        <h6><i class="bi bi-cash me-2"></i>‡∏£‡∏≤‡∏Ñ‡∏≤</h6>
                        <div class="d-flex justify-content-between">
                            <span>‡∏Ñ‡πà‡∏≤‡∏´‡πâ‡∏≠‡∏á ${nights} ‡∏Ñ‡∏∑‡∏ô:</span>
                            <span>‡∏ø${pricing.subtotal.toLocaleString()}</span>
                        </div>
                        <div class="d-flex justify-content-between">
                            <span>‡∏†‡∏≤‡∏©‡∏µ (10%):</span>
                            <span>‡∏ø${pricing.taxes.toLocaleString()}</span>
                        </div>
                        <div class="d-flex justify-content-between">
                            <span>‡∏Ñ‡πà‡∏≤‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£:</span>
                            <span>‡∏ø${pricing.fees.toLocaleString()}</span>
                        </div>
                        <hr>
                        <div class="d-flex justify-content-between fw-bold">
                            <span>‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏¥‡πâ‡∏ô:</span>
                            <span class="text-success">‡∏ø${pricing.totalAmount.toLocaleString()}</span>
                        </div>
                    </div>
                </div>
            `;

            document.getElementById('bookingSummary').innerHTML = summary;
        }

        // Create real booking
        async function createRealBooking(formData) {
            if (!apiHealthy) {
                throw new Error('API ‡πÑ‡∏°‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ Backend ‡πÄ‡∏õ‡∏¥‡∏î‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà localhost:3001');
            }

            const response = await fetch(`${API_BASE_URL}/bookings`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Accept': 'application/json'
                },
                body: JSON.stringify(formData)
            });

            if (!response.ok) {
                const errorData = await response.text();
                throw new Error(`HTTP ${response.status}: ${errorData}`);
            }

            return await response.json();
        }

        // Form submission
        document.getElementById('realBookingForm').addEventListener('submit', async function(e) {
            e.preventDefault();

            // Show loading
            document.getElementById('loadingCard').classList.add('show');
            document.getElementById('resultsCard').classList.remove('show');
            document.getElementById('submitBtn').disabled = true;

            // Collect form data
            const checkinDate = document.getElementById('checkinDate').value;
            const checkoutDate = document.getElementById('checkoutDate').value;
            const roomType = document.getElementById('roomType').value;
            
            const checkin = new Date(checkinDate);
            const checkout = new Date(checkoutDate);
            const nights = Math.ceil((checkout - checkin) / (1000 * 60 * 60 * 24));
            const pricing = calculatePricing(roomType, nights);
            
            const formData = {
                guest: {
                    name: document.getElementById('guestName').value,
                    email: document.getElementById('guestEmail').value,
                    phone: document.getElementById('guestPhone').value,
                    nationality: document.getElementById('nationality').value
                },
                room: {
                    type: roomType,
                    guests: parseInt(document.getElementById('guestCount').value),
                    preferences: document.getElementById('specialRequests').value
                },
                dates: {
                    checkin: checkinDate,
                    checkout: checkoutDate,
                    nights: nights
                },
                pricing: pricing,
                specialRequests: document.getElementById('specialRequests').value,
                source: "Real Booking Test - Web Form",
                paymentMethod: document.getElementById('paymentMethod').value,
                status: "confirmed"
            };

            try {
                console.log('üè® Creating real booking...', formData);
                
                const result = await createRealBooking(formData);

                // Show success results
                let resultsHtml = `
                    <div class="result-card p-3 mb-3">
                        <h5 class="text-success mb-3">
                            <i class="bi bi-check-circle-fill me-2"></i>
                            ‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! (‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡πâ‡∏ß)
                        </h5>
                        <p><strong>‡∏£‡∏´‡∏±‡∏™‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á:</strong> <code>${result.bookingReferenceId || result.id}</code></p>
                        <p><strong>QR Code:</strong> <code>${result.qrCode || 'Generated'}</code></p>
                        <p><strong>‡∏´‡πâ‡∏≠‡∏á:</strong> ${result.room?.number || '‡∏£‡∏≠‡∏à‡∏±‡∏î‡∏™‡∏£‡∏£'}</p>
                        <p><strong>‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô:</strong> ‡∏ø${(result.pricing?.totalAmount || pricing.totalAmount).toLocaleString()}</p>
                        
                        <div class="alert alert-success mt-3">
                            <h6><i class="bi bi-info-circle me-2"></i>‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á:</h6>
                            <p class="mb-1">1. ‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤ Admin Panel: <a href="http://localhost:3000/room-booking-list" target="_blank">Room Booking List</a></p>
                            <p class="mb-0">2. ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏î‡πâ‡∏ß‡∏¢‡∏£‡∏´‡∏±‡∏™: <strong>${result.bookingReferenceId || result.id}</strong></p>
                        </div>
                    </div>
                `;

                document.getElementById('bookingResults').innerHTML = resultsHtml;

            } catch (error) {
                console.error('‚ùå Error creating real booking:', error);
                
                document.getElementById('bookingResults').innerHTML = `
                    <div class="error-card p-3">
                        <h5 class="text-danger mb-3">
                            <i class="bi bi-exclamation-triangle-fill me-2"></i>
                            ‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
                        </h5>
                        <p class="mb-2"><strong>‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏:</strong> ${error.message}</p>
                        
                        <div class="mt-3">
                            <h6>‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç:</h6>
                            <ul class="small">
                                <li>‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ Backend API ‡πÄ‡∏õ‡∏¥‡∏î‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà localhost:3001</li>
                                <li>‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</li>
                                <li>‡∏î‡∏π error logs ‡πÉ‡∏ô terminal Backend</li>
                            </ul>
                        </div>
                    </div>
                `;
            } finally {
                // Hide loading and show results
                document.getElementById('loadingCard').classList.remove('show');
                document.getElementById('resultsCard').classList.add('show');
                document.getElementById('submitBtn').disabled = false;
            }
        });

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            checkApiHealth();
            updateSummary();
            
            // Update summary on form changes
            ['guestName', 'roomType', 'checkinDate', 'checkoutDate', 'guestCount'].forEach(id => {
                document.getElementById(id).addEventListener('change', updateSummary);
                document.getElementById(id).addEventListener('input', updateSummary);
            });

            // Check API health every 30 seconds
            setInterval(checkApiHealth, 30000);
        });
    </script>
</body>
</html>
